<div class="pyramid-container">
    <div class="col-md-12">
        <div class="row">
            <div class="col-md-2">
                <site-harbor
                        [(HAS_DOCKED_SHIP)]="hasShipDocked"
                        [ORIENTATION]="'vertical'"
                        [SITE_ID]="pyramidId"
                        [SHIP_WANTS_TO_SAIL]="SHIP_WANTS_TO_SAIL"
                        [(ROUND)]="ROUND"
                        [(IS_PLAYING_CARD)]="IS_PLAYING_CARD"
                        [(CARD_ID)]="CARD_ID"
                        [(CARD_TYPE)]="CARD_TYPE"
                        class="harbor"></site-harbor>
            </div>

            <div class="col-md-10 pyramid-content-container">
                <div class="bigPyramid-square">
                    <div class="stoneRow" *ngFor="let row of pyramidStones[0]">
                        <div class="bigPyramid-stones">
                            <div class="stone {{stone.color != undefined ? stone.color : ''}}" *ngFor="let stone of row">

                            </div>
                        </div>
                    </div>
                </div>

                <div class="bigPyramid-square">
                    <div class="stoneRow-grid">
                        <div class="bigPyramid-stones-grid">
                            <div class="stone-grid" [ngClass]="{updated: changedStones[0]!=undefined && changedStones[0]==true}"><span [ngClass]="{blueScore: changedStones[0] != undefined}">2</span></div>
                            <div class="stone-grid" [ngClass]="{updated: changedStones[1]!=undefined && changedStones[1]==true}"><span [ngClass]="{blueScore: changedStones[1] != undefined}">1</span></div>
                            <div class="stone-grid" [ngClass]="{updated: changedStones[2]!=undefined && changedStones[2]==true}"><span [ngClass]="{blueScore: changedStones[2] != undefined}">3</span></div>
                        </div>
                    </div>
                    <div class="stoneRow-grid">
                        <div class="bigPyramid-stones-grid">
                            <div class="stone-grid" [ngClass]="{updated: changedStones[3]!=undefined && changedStones[3]==true}"><span [ngClass]="{blueScore: changedStones[3] != undefined}">2</span></div>
                            <div class="stone-grid" [ngClass]="{updated: changedStones[4]!=undefined && changedStones[4]==true}"><span [ngClass]="{blueScore: changedStones[4] != undefined}">4</span></div>
                            <div class="stone-grid" [ngClass]="{updated: changedStones[5]!=undefined && changedStones[5]==true}"><span [ngClass]="{blueScore: changedStones[5] != undefined}">3</span></div>
                        </div>
                    </div>
                    <div class="stoneRow-grid">
                        <div class="bigPyramid-stones-grid">
                            <div class="stone-grid" [ngClass]="{updated: changedStones[6]!=undefined && changedStones[6]==true}"><span [ngClass]="{blueScore: changedStones[6] != undefined}">2</span></div>
                            <div class="stone-grid" [ngClass]="{updated: changedStones[7]!=undefined && changedStones[7]==true}"><span [ngClass]="{blueScore: changedStones[7] != undefined}">1</span></div>
                            <div class="stone-grid" [ngClass]="{updated: changedStones[8]!=undefined && changedStones[8]==true}"><span [ngClass]="{blueScore: changedStones[8] != undefined}">3</span></div>
                        </div>
                    </div>
                </div>


                <div class="middlePyramid-square">
                    <div class="stoneRow" *ngFor="let row of pyramidStones[1]">
                        <div class="middlePyramid-stones">
                            <div class="stone {{stone.color != undefined ? stone.color : ''}}" *ngFor="let stone of row">

                            </div>
                        </div>
                    </div>
                </div>

                <div class="middlePyramid-square">
                    <div class="stoneRow-grid">
                        <div class="middlePyramid-stones-grid">
                            <div class="stone-grid" [ngClass]="{updated: changedStones[9]!=undefined && changedStones[9]==true}"><span [ngClass]="{blueScore: changedStones[9] != undefined}">2</span></div>
                            <div class="stone-grid" [ngClass]="{updated: changedStones[10]!=undefined && changedStones[10]==true}"><span [ngClass]="{blueScore: changedStones[10] != undefined}">3</span></div>
                        </div>
                    </div>
                    <div class="stoneRow-grid">
                        <div class="middlePyramid-stones-grid">
                            <div class="stone-grid" [ngClass]="{updated: changedStones[11]!=undefined && changedStones[11]==true}"><span [ngClass]="{blueScore: changedStones[11] != undefined}">1</span></div>
                            <div class="stone-grid" [ngClass]="{updated: changedStones[12]!=undefined && changedStones[12]==true}"><span [ngClass]="{blueScore: changedStones[12] != undefined}">3</span></div>
                        </div>
                    </div>
                </div>

                <div class="smallPyramid-square">
                    <div class="stoneRow" *ngFor="let row of pyramidStones[2]">
                        <div class="smallPyramid-stones">
                            <div class="stone {{stone.color != undefined ? stone.color : ''}}" *ngFor="let stone of row">

                            </div>
                        </div>
                    </div>
                </div>

                <div class="smallPyramid-square">
                    <div class="stoneRow-grid">
                        <div class="smallPyramid-stones-grid">
                            <div class="stone-grid" [ngClass]="{updated: changedStones[13]!=undefined && changedStones[13]==true}"><span [ngClass]="{blueScore: changedStones[13] != undefined}">4</span></div>
                        </div>
                    </div>
                </div>


                <div class="additionalStones">
                    <div class="additional-stoneRow" *ngIf="hasAdditionalStones">
                        <div class="additionalStone BLACK" [ngClass]="{updated: additionalStonesChanged[0]}">
                            {{additionalStones[0]}}
                        </div>
                        <div class="additionalStone WHITE" [ngClass]="{updated: additionalStonesChanged[1]}">
                            {{additionalStones[1]}}
                        </div>
                        <div *ngIf="numberOfPlayers > 2" class="additionalStone BROWN" [ngClass]="{updated: additionalStonesChanged[2]}">
                            {{additionalStones[2]}}
                        </div>
                        <div *ngIf="numberOfPlayers > 3" class="additionalStone GRAY" [ngClass]="{updated: additionalStonesChanged[3]}">
                            {{additionalStones[3]}}
                        </div>
                    </div>
                </div>


                <div class="site-name-popup">
                    <div class="name">
                        <h2>Pyramids</h2>
                    </div>

                    <div class="rulesPopup">
                        <i class="fa fa-question-circle popup-icon" aria-hidden="true" (mouseenter)="showPopUp=true" (mouseout)="showPopUp=false">
                <span *ngIf="showPopUp" class="popup-text">
                    <h2>Pyramid</h2>
                    <p>For each stone delivered here, the owner of the stone earns points <b style="color:red">immediately</b>. Place the stone on the next free space in the pyramid. Stones are placed
                        column by column. Placement of the stones begins at the top left until the column is full.</p>
                    <p>After the 3x3 layer is full the next stone is placed at the 2x2 layer and finally on the 1x1. After all layers are full every additional stone gets one point.</p>
                </span>
                        </i>
                    </div>

                </div>
            </div>
        </div>
    </div>
</div>
